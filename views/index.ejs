<%- include('./partials/header.ejs') %>
<div class="vh-100 gradient-custom">
  <div class="container py-5 h-100">
    <div>
      <h1 class="text-center list-title"><%=listTitle%></h1>
    </div>
    <div class="row d-flex justify-content-center p-4 h-100">
      <div class="col col-xl-10">
        <div class="card">
          <div class="card-body p-5">
            <!-- Form -->
            <form
              class="d-flex justify-content-center align-items-center mb-4"
              action="/"
              method="post"
            >
              <div class="form-outline flex-fill">
                <input
                  type="text"
                  id="form2"
                  class="form-control"
                  name="newtask"
                />
                <label class="form-label" for="form2">New task...</label>
              </div>
              <button
                type="submit"
                class="btn btn-info ms-2"
                value="<%= listTitle %>"
                name="add"
              >
                Add
              </button>
            </form>

            <!-- !Tabs navs -->
            <ul class="nav nav-tabs mb-4 pb-2" id="ex1" role="tablist">
              <li class="nav-item" role="presentation">
                <a
                  class="nav-link active"
                  id="ex1-tab-1"
                  data-mdb-toggle="tab"
                  href="#ex1-tabs-1"
                  role="tab"
                  aria-controls="ex1-tabs-1"
                  aria-selected="true"
                  >All</a
                >
              </li>
              <li class="nav-item" role="presentation">
                <a
                  class="nav-link"
                  id="ex1-tab-2"
                  data-mdb-toggle="tab"
                  href="#ex1-tabs-2"
                  role="tab"
                  aria-controls="ex1-tabs-2"
                  aria-selected="false"
                  >Active</a
                >
              </li>
              <li class="nav-item" role="presentation">
                <a
                  class="nav-link"
                  id="ex1-tab-3"
                  data-mdb-toggle="tab"
                  href="#ex1-tabs-3"
                  role="tab"
                  aria-controls="ex1-tabs-3"
                  aria-selected="false"
                  >Completed</a
                >
              </li>
            </ul>
            <!-- !Tabs navs -->

            <!-- !Tabs content -->
            <div class="tab-content" id="ex1-content">
              <div
                class="tab-pane fade show active"
                id="ex1-tabs-1"
                role="tabpanel"
                aria-labelledby="ex1-tab-1"
              >
                <ul class="list-group mb-0">
                  <!-- !All Task -->
                  <% alltasks.forEach((a)=>{ %> <% if(a.status==="checked"){ %>
                  <li
                    class="list-group-item d-flex align-items-center border-0 mb-1 rounded"
                    style="background-color: #f4f6f7"
                  >
                    <input
                      class="form-check-input me-2"
                      type="checkbox"
                      checked
                    />
                    <p class="mt-3 ps-2"><%= a.work %></p>
                  </li>
                  <% }else{ %>
                  <form action="/delete" method="post">
                    <li
                      class="list-group-item d-flex align-items-center border-0 mb-2 rounded"
                      style="background-color: #f4f6f7"
                    >
                      <input
                        class="form-check-input me-2"
                        type="checkbox"
                        name="checkbox"
                        value="<%=a._id %>"
                        onChange="this.form.submit()"
                      />
                      <p class="mt-3 ps-2"><%= a.work %></p>
                      <input
                        type="hidden"
                        name="listName"
                        value="<%=listTitle%>"
                      />
                    </li>
                  </form>
                  <% } %> <% }) %>
                  <!-- !All Task End -->
                </ul>
              </div>
              <div
                class="tab-pane fade"
                id="ex1-tabs-2"
                role="tabpanel"
                aria-labelledby="ex1-tab-2"
              >
                <ul class="list-group mb-0">
                  <!-- !Active Task -->
                  <% activetasks.forEach((a)=>{ %>
                  <li
                    class="list-group-item d-flex align-items-center border-0 mb-2 rounded"
                    style="background-color: #f4f6f7"
                  >
                    <p class="mt-3 ps-2 active_task"><%= a.work %></p>
                  </li>
                  <% })%>
                  <!-- !Active Task End -->
                </ul>
              </div>
              <div
                class="tab-pane fade"
                id="ex1-tabs-3"
                role="tabpanel"
                aria-labelledby="ex1-tab-3"
              >
                <ul class="list-group mb-0">
                  <!-- !Done Tasks -->
                  <% finishedtasks.forEach((a)=>{ %>
                  <li
                    class="list-group-item d-flex align-items-center border-0 mb-2 rounded"
                    style="background-color: #f4f6f7"
                  >
                    <input
                      class="form-check-input me-2"
                      type="checkbox"
                      checked
                    />
                    <p class="mt-3 ps-2"><%= a.work %></p>
                  </li>
                  <% })%>
                </ul>
              </div>
            </div>
            <!-- !Tabs content -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<%- include('./partials/footer.ejs') %>
